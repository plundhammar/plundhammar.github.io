<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Properties of List-Mode data from a Compton Camera | plundhammar</title>
<meta name="keywords" content="Analytical Methods, Compton Scattering, Propapility">
<meta name="description" content="The energies of a Compton scatter chain are correlated through the Compton scattering equation as well as the Klein-Nishina distribution. This means that some vital statistics must exist, and perhaps be possible to calculate in closed expression. In this post I wanted to give it a try and compare it to some simulated data.
I recently got a hold on some simulated list-mode data of photons interacting with a silicon volume. That is, a list
$$
[\mathbf{r}_1,E_1,\mathbf{r}_2,E_2]
$$">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/posts/properties-of-list-mode-data-of-a-compton-camera/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css" integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/properties-of-list-mode-data-of-a-compton-camera/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous">

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js" integrity="sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY" crossorigin="anonymous"></script>

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>

>
<script>
document.addEventListener("DOMContentLoaded", function() {
    renderMathInElement(document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "$", right: "$", display: false}
        ]
    });
});
</script>


</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="plundhammar (Alt + H)">plundhammar</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Properties of List-Mode data from a Compton Camera
    </h1>
    <div class="post-meta"><span title='2024-07-26 00:40:04 -0800 -0800'>July 26, 2024</span>

</div>
  </header> 
  <div class="post-content"><p><strong>The energies of a Compton scatter chain are correlated through the Compton scattering equation as well as the Klein-Nishina distribution. This means that some vital statistics must exist, and perhaps be possible to calculate in closed expression. In this post I wanted to give it a try and compare it to some simulated data.</strong></p>
<p>I recently got a hold on some simulated list-mode data of photons interacting with a silicon volume. That is, a list
$$
[\mathbf{r}_1,E_1,\mathbf{r}_2,E_2]
$$</p>
<p>of</p>
<ul>
<li>interaction position $\mathbf{r}_1$ of Compton event with</li>
<li>the deposited energy $E_1$ of the scattered electron and</li>
<li>the interaction position $\mathbf{r}_2$ of either a photoabsorption or another Compton scatter event following the first scattering event, with</li>
<li>the corresponding deposited energy $E_2$ of the scattered electron.
Something that occurred to me was that basically all of the statistics are known in this problem. That is, for a scatter series as in figure 1 we have that Ref. [1]</li>
</ul>
<p>$$
E_\gamma&rsquo; = \frac{E_\gamma}{1+\varepsilon(1-\cos\theta)}
$$</p>
<p>with $\theta$ being the scatter angle and $\varepsilon = E_\gamma&rsquo;/E_\gamma$, and canonical for $E_\gamma&rsquo;&rsquo;$ with $\theta&rsquo;$ and $\varepsilon&rsquo;$ defined similarly to above.</p>
<p><img loading="lazy" src="/ScatterSeries.png" alt="Title"  />

<strong>Figure 1</strong>: A serie of two scatter events.</p>
<p>Since the scatter angle is inherently stochastic with a probability density function given by a function $\mathrm{pr}(\cos\theta)$ proportional to the Klein-Nishina distribution, Ref. [2], i.e.
$$
\mathrm{pr}(\cos\theta)\propto \frac{1}{1+\varepsilon(1-\cos\omega)}\left(\frac{1}{1+\varepsilon(1-\cos\omega)}+1+\varepsilon(1-\cos\omega-(1-\cos^2\omega))\right).
$$
That means that we can calculate the moments of $E_\gamma&rsquo;$ and $E_\gamma&rsquo;&rsquo;$. For instance,
$$
\mathbb{E}\left[E_\gamma&rsquo;\right] = E_\gamma\int_{-1}^1\mathrm{d}(\cos\theta)\frac{\mathrm{pr}(\cos\theta)}{1+\varepsilon(1-\cos\theta)}.
$$
For $\varepsilon = 1$, i.e. $E_\gamma = 511~\mathrm{keV}$, we can calculate the expectation value of the deposited energy $E_1$:
$$
\mathbb{E}\left[E_1\right] = 511\times\left[\frac{\log(3)-\frac{28}{81}}{\frac{40}{9}-\log(3)}\right]~\mathrm{keV} \approx 511\times 0.656\mathrm{keV}\approx 335\mathrm{keV}
$$
For a given $E_\gamma&rsquo;$ we can calculate the expectation value and standard deviation of $E_\gamma&rsquo;&rsquo;$ in the same manner as above. I got some data simulating the setup in figure (2).</p>
<p><img loading="lazy" src="/SimulationGeometry.png" alt="Title"  />

<strong>Figure 2</strong>: Geometry of the simulation.</p>
<p>The events are the positions and energies as described above, and illustrated in figure (3)</p>
<p><img loading="lazy" src="/EventsInSi3.png" alt="Title"  />

<strong>Figure 3</strong>: The events in the silicon solid.]]</p>
<p>In figure (4) the simulated data is shown together with the expectation value (red line) and one standard deviation away from the expectation value (blue lines) as well as the line where photo absorption happens (gray).</p>
<p><img loading="lazy" src="/EnergyDistribution.png" alt="Title"  />

<strong>Figure 4</strong>: Energy distribution of some simulated list-mode data and its statistics.]]</p>
<p>Note that the realizations get denser at $E_1 = 335~\mathrm{keV}$, as calculated above.</p>
<h4 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h4>
<p>The result in figure 4 looks kind of right. However, I implicitly assume that $E_1$ is given when calculating the expectation value of $E_2$. This is of course true, since the events are causal. What could have been taken into consideration is the distribution of $E_1$ and subsequently how the pair $(E_1,E_2)$ is distributed in the energy space. I could have gone further in the statistics, and maybe I will in the future, but I will leave it like this for now.</p>
<h4 id="references">References<a hidden class="anchor" aria-hidden="true" href="#references">#</a></h4>
<p>[1] A. H. Compton 1923 <strong>A Quantum Theory of The Scattering of X-Rays by Light Elements</strong> Phys. Review 21.5 483-502, <a href="https://history.aip.org/exhibits/gap/PDF/compton.pdf">Link</a></p>
<p>[2] Klein O and Nishina Y 1929 <strong>Uber die Streuung von Strahlung durch freie Elektronen nach der neuen relativistischen Quantendynamik von Dirac Z</strong> Phys. 52 853–69, <a href="https://ui.adsabs.harvard.edu/abs/1929ZPhy...52..853K/abstract">Link</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/analytical-methods/">Analytical Methods</a></li>
      <li><a href="http://localhost:1313/tags/compton-scattering/">Compton Scattering</a></li>
      <li><a href="http://localhost:1313/tags/propapility/">Propapility</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="http://localhost:1313/">plundhammar</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
